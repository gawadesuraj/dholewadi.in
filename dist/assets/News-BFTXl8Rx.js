import{s as i,j as e,P as g,C as j}from"./index-C0LDelAR.js";import{r as l,L as m}from"./router-DLuhiZlq.js";import{S as p}from"./SearchBar-CmaLrTg2.js";import"./vendor-BVxHPo8L.js";function S(){const[o,n]=l.useState([]),[c,x]=l.useState(""),[h,u]=l.useState(!0);l.useEffect(()=>{async function s(){const{data:t,error:a}=await i.from("news").select("*").eq("is_published",!0).order("published_at",{ascending:!1});a||n(t),u(!1)}s();const w=i.channel("realtime-news").on("postgres_changes",{event:"*",schema:"public",table:"news"},t=>{n(a=>t.eventType==="INSERT"?[t.new,...a]:t.eventType==="UPDATE"?a.map(r=>r.id===t.new.id?t.new:r):t.eventType==="DELETE"?a.filter(r=>r.id!==t.old.id):a)}).subscribe();return()=>i.removeChannel(w)},[]);const d=o.filter(s=>s.title?.toLowerCase().includes(c.toLowerCase())||s.summary?.toLowerCase().includes(c.toLowerCase())),f=[{label:"News",href:null}];return h?e.jsx("div",{className:"py-20 text-center text-gray-500 text-lg",children:"Loading news..."}):e.jsxs("div",{children:[e.jsx(g,{title:"News & Updates",subtitle:"Latest news, announcements and updates from Panchayat Samiti Shirala",breadcrumbs:f}),e.jsxs("div",{className:"container py-12",children:[e.jsx("div",{className:"mb-12 flex justify-center px-4",children:e.jsx("div",{className:"w-full max-w-lg",children:e.jsx(p,{onSearch:x,placeholder:"Search news by title..."})})}),d.length>0?e.jsx("div",{className:"grid gap-6",children:d.map(s=>e.jsx(j,{hover:!0,children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-3 mb-3",children:e.jsx("span",{className:"text-gray-500 text-sm",children:new Date(s.published_at).toLocaleDateString()})}),e.jsx("h2",{className:"text-xl font-semibold mb-3 hover:text-primary transition-colors",children:e.jsx(m,{to:`/news/${s.id}`,children:s.title})}),e.jsx("p",{className:"text-gray-600 mb-4 line-clamp-3 notranslate",children:s.summary}),e.jsxs(m,{to:`/news/${s.id}`,className:"inline-flex items-center text-primary hover:text-primary-dark font-medium",children:["Read Full Story",e.jsx("svg",{className:"ml-2 w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]}),s.image_url?e.jsx("img",{src:s.image_url,alt:"",className:"w-full md:w-64 h-48 object-cover rounded-lg"}):e.jsx("div",{className:"w-full md:w-64 h-48 bg-gray-200 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-gray-400 text-sm",children:"News Image"})})]})})},s.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:"ðŸ“°"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No news found"}),e.jsx("p",{className:"text-gray-600",children:"Try a different search keyword."})]})]})]})}export{S as default};
